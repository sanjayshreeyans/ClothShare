{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nimport BarcodeScannerComponent from \"react-webcam-barcode-scanner\";\nimport LoginView from \"../Screens/LoginScreen.js\";\nimport { BarCodeScanner } from \"expo-barcode-scanner\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { NavigatingContainer } from \"react-native-web/dist/index\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport { getDatabase, ref, onValue, set, push } from \"firebase/database\";\nexport default function QRCodeView2(_ref) {\n  var navigation = _ref.navigation;\n  global.keep_scanning = true;\n\n  if (Platform.OS == \"web\") {\n    var _React$useState = React.useState(\"Not Found\"),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        data = _React$useState2[0],\n        setData = _React$useState2[1];\n\n    function switchToDropdown(qr_info) {\n      if (global.keep_scanning) {\n        global.info_qr = qr_info;\n        console.log(typeof qr_info, \"QR Code Type\");\n        console.log(qr_info, \"QR Code Info\");\n\n        var replaceAll = require(\"string.prototype.replaceall\");\n\n        qr_info = qr_info.replaceAll(\"[\", \"\");\n        qr_info = qr_info.replaceAll(\"]\", \"\");\n        qr_info = qr_info.replaceAll(\"'\", \"\");\n        qr_info = qr_info.replaceAll(\" \", \"\");\n        qr_info = qr_info.split(\",\");\n        console.log(qr_info, \"After split\");\n\n        if (global.user_grade == \"TEACHER\") {\n          global.keep_scanning = true;\n\n          if (qr_info.length == 4) {\n            var today = new Date();\n            var date2 = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate() + \" \" + (today.getHours() + 1) + \":\" + (today.getMinutes() + 1);\n            var date = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate() + \"/\" + (today.getHours() + 1) + \":\" + (today.getMinutes() + 1);\n            console.log(date2, \"Date 2\");\n            console.log(date, \"Date 1\");\n            var db = getDatabase();\n            var starCountRef = ref(db, global.user_grade + \"/\" + global.user_name + \"/Signouts/\" + qr_info[3]);\n            onValue(starCountRef, function (snapshot) {\n              var data = snapshot.val();\n              data[\"Completed full Cycle\"] = true;\n              data[\"Time Returned\"] = date2;\n              var send_ref = ref(db, global.user_grade + \"/\" + global.user_name + \"/Signouts/\" + qr_info[3]);\n              set(send_ref, data);\n            });\n          } else {\n            console.log(\"Wrong code!!!!\");\n          }\n        } else {\n          if (qr_info.length == 2) {\n            var _db = getDatabase();\n\n            var authorized_code = ref(_db, \"Authorized Codes\");\n            onValue(authorized_code, function (snapshot) {\n              var data = snapshot.val();\n              var a = [];\n              var d = Object.values(data);\n              console.log(d, \"Data\");\n              console.log(Number(qr_info[0], \"1\"));\n\n              if (d.includes(Number(qr_info[0]))) {\n                console.log(data, \"Data\");\n                console.log(\"signOut\");\n                navigation.navigate(\"destinationPicker\");\n                global.keep_scanning = false;\n              } else {\n                console.log(\"Wrong code!!!!\");\n              }\n            });\n          } else {\n            console.log(\"Wrong code!!!!\");\n          }\n        }\n      }\n    }\n\n    return React.createElement(ImageBackground, {\n      source: require(\"../Scan.png\"),\n      resizeMode: \"cover\",\n      style: styles.image\n    }, React.createElement(View, {\n      style: styles.input\n    }, React.createElement(Text, {\n      style: styles.paragraph\n    }, \"Swiftoff\"), React.createElement(BarcodeScannerComponent, {\n      style: styles.paragraph,\n      width: 1500,\n      height: 640,\n      onUpdate: function onUpdate(err, result) {\n        if (result) switchToDropdown(result.text);else setData(\"Not Found\");\n      }\n    }), React.createElement(\"p\", null, data)));\n  } else {\n    global.proceed = true;\n    console.log(\"inside of else statement to load camera\");\n\n    var _React$useState3 = React.useState(null),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        hasPermission = _React$useState4[0],\n        setHasPermission = _React$useState4[1];\n\n    var _React$useState5 = React.useState(false),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        scanned = _React$useState6[0],\n        setScanned = _React$useState6[1];\n\n    React.useEffect(function () {\n      (function _callee() {\n        var _await$BarCodeScanner, status;\n\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n              case 2:\n                _await$BarCodeScanner = _context.sent;\n                status = _await$BarCodeScanner.status;\n                setHasPermission(status === \"granted\");\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }, []);\n\n    if (hasPermission === null) {\n      return React.createElement(Text, null, \"Requesting for camera permission\");\n    }\n\n    if (hasPermission === false) {\n      return React.createElement(Text, null, \"No access to camera\");\n    }\n\n    return React.createElement(View, {\n      style: styles.container\n    }, React.createElement(BarCodeScanner, {\n      onBarCodeScanned: scanned ? undefined : switchToDropdown,\n      style: StyleSheet.absoluteFillObject\n    }), scanned && React.createElement(Button, {\n      title: \"Tap to Scan Again\",\n      onPress: function onPress() {\n        return setScanned(false);\n      }\n    }));\n\n    function switchToDropdown(qr_info) {\n      if (qr_info != undefined) {\n        global.info_qr = qr_info.data;\n        qr_info = qr_info.data;\n        console.log(typeof qr_info, \"QR Code Type foo\");\n        console.log(qr_info, \"QR Code Info foot\");\n\n        var replaceAll = require(\"string.prototype.replaceall\");\n\n        qr_info = replaceAll(qr_info, \"[\", \"\");\n        qr_info = replaceAll(qr_info, \"]\", \"\");\n        qr_info = replaceAll(qr_info, \"'\", \"\");\n        qr_info = qr_info.split(\",\");\n        console.log(qr_info, \"After split\");\n\n        if (global.user_grade == \"TEACHER\") {\n          if (qr_info.length == 4) {\n            var today = new Date();\n            var date2 = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate() + \" \" + today.getHours() + \":\" + today.getMinutes();\n            var date = today.getFullYear() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getDate() + \"/\" + today.getHours() + \":\" + today.getMinutes();\n            console.log(date2, \"Date 2\");\n            console.log(date, \"Date 1\");\n            var db = getDatabase();\n            var starCountRef = ref(db, qr_info[0] + \"/\" + qr_info[1] + \"/\" + qr_info[2] + \"/\" + qr_info[3]);\n            console.log(starCountRef, \"Infot ref\");\n            onValue(starCountRef, function (snapshot) {\n              var data = snapshot.val();\n              console.log(data, \": Data\");\n              data[\"Completed full Cycle\"] = true;\n              data[\"Time Returned\"] = date2;\n              var count_row = data[\"Row\"];\n              var data_sheet = {\n                \"Completed full Cycle\": \"true\",\n                \"Time Returned\": date2\n              };\n              console.log(global.user_name, \": Here is the name\");\n              data[\"Teacher at Check-In\"] = global.user_name;\n              var data_sheet2 = {\n                \"Teacher at Check-In\": global.user_name\n              };\n              var infoReft = ref(db, \"INFO\");\n              onValue(infoReft, function (snapshot) {\n                var data2 = snapshot.val();\n\n                if (data2[\"queue2\"] == false) {\n                  data2[\"queue2\"] = true;\n                  set(infoReft, data2);\n\n                  if (global.proceed == true) {\n                    console.log(\"SPINNNN\");\n                    var send_ref = ref(db, qr_info[0] + \"/\" + qr_info[1] + \"/\" + qr_info[2] + \"/\" + qr_info[3]);\n                    var path = qr_info[0] + \"/\" + qr_info[1] + \"/\" + qr_info[2] + \"/\" + qr_info[3];\n                    var queue2 = ref(db, \"Queue2\");\n                    global.proceed = false;\n                    set(send_ref, data);\n                    push(queue2, path);\n                    navigation.navigate(\"SuccessfullySignedIn\");\n                    return;\n                  }\n\n                  return;\n                } else {\n                  if (global.proceed == true) {\n                    console.log(\"SPINNNN\");\n\n                    var _send_ref = ref(db, qr_info[0] + \"/\" + qr_info[1] + \"/\" + qr_info[2] + \"/\" + qr_info[3]);\n\n                    var _path = qr_info[0] + \"/\" + qr_info[1] + \"/\" + qr_info[2] + \"/\" + qr_info[3];\n\n                    var _queue = ref(db, \"Queue2\");\n\n                    global.proceed = false;\n                    var SPREADSHEET_ID = \"1ilh0SncMmPGsRxu_bJ6h7YG2isc7aFU-WSrxDUlQjyA\";\n                    var SHEET_ID = \"1936491392\";\n                    var CLIENT_EMAIL = \"pretty@iep1-337004.iam.gserviceaccount.com\";\n                    var range = \"A1\";\n                    var api_key = \"AIzaSyDQVlXWEWSSuQ_BUhN3mfx7Cq6iYWt5w2I\";\n                    var PRIVATE_KEY = \"ya29.A0ARrdaM9Bdr8LasGVYImS-v31BVY78c43d7xHEuIutBK6u6g9DhIDlPfA4Ny1rVVKV-oZdttBDVF8GoAobyCWNT0OuM_r8nfMxIg0dtuL0RyWOq4lizgrAgeTDvH2gUzmYq4YzVZHBgVkT7x8ONk5Z0_2WFpn\";\n\n                    var printObject = function printObject(obj) {\n                      var colum = 9;\n                      var row = count_row;\n                      set(_send_ref, data);\n                      push(_queue, _path);\n\n                      for (var key in obj) {\n                        if (obj.hasOwnProperty(key)) {\n                          updateSheetValues(String(obj[key]), row, colum);\n                          colum = 10;\n                          console.log(colum, \"colum\");\n                          console.log(row, \"row\");\n                        }\n                      }\n\n                      console.log(\"The job finished successfully.\");\n                    };\n\n                    var printObject2 = function printObject2(obj, col) {\n                      var colum = col;\n                      var row = count_row;\n\n                      for (var key in obj) {\n                        if (obj.hasOwnProperty(key)) {\n                          updateSheetValues(String(obj[key]), row, colum);\n                          console.log(colum, \"colum\");\n                          console.log(row, \"row\");\n                        }\n                      }\n\n                      console.log(\"The job finished successfully.\");\n                    };\n\n                    var updateSheetValues = function updateSheetValues(value, row, colum) {\n                      fetch(\"https://sheets.googleapis.com/v4/spreadsheets/\" + SPREADSHEET_ID + \":batchUpdate\", {\n                        method: \"POST\",\n                        headers: {\n                          \"Content-Type\": \"application/json\",\n                          Authorization: \"Bearer \" + PRIVATE_KEY\n                        },\n                        body: JSON.stringify({\n                          requests: [{\n                            repeatCell: {\n                              range: {\n                                startColumnIndex: colum - 1,\n                                endColumnIndex: colum,\n                                startRowIndex: row - 1,\n                                endRowIndex: row,\n                                sheetId: SHEET_ID\n                              },\n                              cell: {\n                                userEnteredValue: {\n                                  stringValue: value\n                                }\n                              },\n                              fields: \"*\"\n                            }\n                          }]\n                        })\n                      });\n                    };\n\n                    function run() {\n                      return _regeneratorRuntime.async(function run$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              _context2.next = 2;\n                              return _regeneratorRuntime.awrap(printObject(data_sheet));\n\n                            case 2:\n                              _context2.next = 4;\n                              return _regeneratorRuntime.awrap(printObject2(data_sheet2, 3));\n\n                            case 4:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, null, null, null, Promise);\n                    }\n\n                    run();\n                    navigation.navigate(\"SuccessfullySignedIn\");\n                    return;\n                  }\n\n                  return;\n                }\n              }, {\n                onlyOnce: true\n              });\n              return;\n            });\n          } else {\n            console.log(\"Wrong code!!!!\");\n          }\n        } else {\n          if (qr_info.length == 2) {\n            console.log(\"signOut\");\n            navigation.replace(\"destinationPicker\");\n          } else {\n            console.log(\"Wrong code!!!!\");\n          }\n        }\n      }\n    }\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    backgroundColor: \"white\",\n    padding: 8\n  },\n  paragraph: {\n    margin: 24,\n    fontSize: 70,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    color: \"white\"\n  },\n  input: {\n    height: 0,\n    width: 200,\n    margin: 0,\n    padding: 10,\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    paddingBottom: 800\n  },\n  fixToText: {\n    alignSelf: \"center\",\n    width: 200,\n    borderRadius: 15,\n    paddingTop: 20\n  },\n  roundButton1: {\n    width: 200,\n    height: 40,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    padding: 10,\n    borderRadius: 15,\n    backgroundColor: \"purple\"\n  },\n  roundButton2: {\n    width: 200,\n    height: 40,\n    paddingTop: 0,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    padding: 0,\n    borderRadius: 15,\n    backgroundColor: \"orange\"\n  },\n  roundButton13: {\n    fontSize: 20,\n    color: \"white\"\n  },\n  roundButton14: {\n    fontSize: 20,\n    color: \"white\"\n  },\n  image: {\n    flex: 1,\n    justifyContent: \"center\"\n  },\n  input2: {\n    height: 40,\n    margin: 12,\n    borderWidth: 0,\n    borderWidth: 0,\n    borderRadius: 15,\n    padding: 10,\n    width: 400,\n    fontSize: 16,\n    textAlign: \"center\",\n    color: \"red\",\n    alignSelf: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/sanjayshreeyansgmail.com/Documents/Dev/react_egress-master 4/Screens/QRCodeScreen.js"],"names":["React","BarcodeScannerComponent","LoginView","BarCodeScanner","NavigatingContainer","getDatabase","ref","onValue","set","push","QRCodeView2","navigation","global","keep_scanning","Platform","OS","useState","data","setData","switchToDropdown","qr_info","info_qr","console","log","replaceAll","require","split","user_grade","length","today","Date","date2","getFullYear","getMonth","getDate","getHours","getMinutes","date","db","starCountRef","user_name","snapshot","val","send_ref","authorized_code","a","d","Object","values","Number","includes","navigate","styles","image","input","paragraph","err","result","text","proceed","hasPermission","setHasPermission","scanned","setScanned","useEffect","requestPermissionsAsync","status","container","undefined","StyleSheet","absoluteFillObject","count_row","data_sheet","data_sheet2","infoReft","data2","path","queue2","SPREADSHEET_ID","SHEET_ID","CLIENT_EMAIL","range","api_key","PRIVATE_KEY","printObject","obj","colum","row","key","hasOwnProperty","updateSheetValues","String","printObject2","col","value","fetch","method","headers","Authorization","body","JSON","stringify","requests","repeatCell","startColumnIndex","endColumnIndex","startRowIndex","endRowIndex","sheetId","cell","userEnteredValue","stringValue","fields","run","onlyOnce","replace","create","flex","justifyContent","backgroundColor","padding","margin","fontSize","fontWeight","textAlign","color","height","width","alignItems","alignSelf","paddingBottom","fixToText","borderRadius","paddingTop","roundButton1","roundButton2","roundButton13","roundButton14","input2","borderWidth"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport BarcodeScannerComponent from \"react-webcam-barcode-scanner\";\nimport LoginView from \"../Screens/LoginScreen.js\";\nimport { BarCodeScanner } from \"expo-barcode-scanner\";\nimport {\n  Text,\n  View,\n  StyleSheet,\n  TextInput,\n  Button,\n  TouchableOpacity,\n  Platform,\n  NavigatingContainer,\n  ImageBackground,\n} from \"react-native\";\nimport { getDatabase, ref, onValue, set, push } from \"firebase/database\";\nexport default function QRCodeView2({ navigation }) {\n  // If platform is web.\n  global.keep_scanning =true\n  if (Platform.OS == \"web\") {\n    const [data, setData] = React.useState(\"Not Found\");\n\n    // Function to check the type of QRCode, Sign-in or Sign-out.\n    function switchToDropdown(qr_info) {\n      if (global.keep_scanning) {\n        global.info_qr = qr_info;\n        console.log(typeof qr_info, \"QR Code Type\");\n        console.log(qr_info, \"QR Code Info\");\n        const replaceAll = require(\"string.prototype.replaceall\");\n        qr_info = qr_info.replaceAll(\"[\", \"\");\n        qr_info = qr_info.replaceAll(\"]\", \"\");\n        qr_info = qr_info.replaceAll(\"'\", \"\");\n        qr_info = qr_info.replaceAll(\" \", \"\");\n\n        qr_info = qr_info.split(\",\");\n        console.log(qr_info, \"After split\");\n\n        // Converting the String type QR Code info to Array type. Complete.\n\n        // User is a Teacher\n        if (global.user_grade == \"TEACHER\") {\n          global.keep_scanning = true;\n          // Run this code when the teacher scans the correct code.\n          if (qr_info.length == 4) {\n            var today = new Date();\n            var date2 =\n              today.getFullYear() +\n              \"/\" +\n              (today.getMonth() + 1) +\n              \"/\" +\n              today.getDate() +\n              \" \" +\n              (today.getHours() + 1) +\n              \":\" +\n              (today.getMinutes() + 1);\n\n            var date =\n              today.getFullYear() +\n              \"/\" +\n              (today.getMonth() + 1) +\n              \"/\" +\n              today.getDate() +\n              \"/\" +\n              (today.getHours() + 1) +\n              \":\" +\n              (today.getMinutes() + 1);\n            console.log(date2, \"Date 2\");\n            console.log(date, \"Date 1\");\n\n            const db = getDatabase();\n            const starCountRef = ref(\n              db,\n              global.user_grade +\n                \"/\" +\n                global.user_name +\n                \"/Signouts/\" +\n                qr_info[3]\n            );\n            onValue(starCountRef, (snapshot) => {\n              const data = snapshot.val();\n              data[\"Completed full Cycle\"] = true;\n              data[\"Time Returned\"] = date2;\n              \n              const send_ref = ref(\n                db,\n                global.user_grade +\n                  \"/\" +\n                  global.user_name +\n                  \"/Signouts/\" +\n                  qr_info[3]\n              );\n              set(send_ref, data);\n            });\n          }\n\n          // Run this code when the teacher scans the wrong code.\n          else {\n            console.log(\"Wrong code!!!!\");\n          }\n        }\n        // User is a Teacher. Complete\n\n        // User is a Student\n        else {\n          // Run this code when the student scans the correct code.\n          if (qr_info.length == 2) {\n            const db = getDatabase();\n            const authorized_code = ref(db, \"Authorized Codes\")\n            onValue(authorized_code, (snapshot) => {\n\n              const data = snapshot.val();\n              var a = []\n              const d = Object.values(data)\n              console.log(d, \"Data\");\n              console.log(Number(qr_info[0], \"1\"))\n              if (d.includes(Number(qr_info[0]))) {\n              console.log(data, \"Data\");\n              console.log(\"signOut\");\n              navigation.navigate(\"destinationPicker\");\n              global.keep_scanning = false;\n              }\n              else{\n                console.log(\"Wrong code!!!!\");\n              }\n            })\n            \n          }\n\n          // Run this code when the student scans the wrong code.\n          else {\n            console.log(\"Wrong code!!!!\");\n          }\n        }\n      }\n    } \n\n\n    return (\n      <ImageBackground\n      source={require(\"../Scan.png\")}\n      resizeMode=\"cover\"\n      style={styles.image}>\n <View style={styles.input}>\n        <Text style={styles.paragraph}>Swiftoff</Text>\n        <BarcodeScannerComponent\n          style={styles.paragraph}\n          width={1500}\n          height={640}\n          onUpdate={(err, result) => {\n            if (result) switchToDropdown(result.text);\n            else setData(\"Not Found\");\n          }}\n        />\n        <p>{data}</p>\n      </View>\n      </ImageBackground>\n    );\n  }\n\n  // If platform is anything other than web.\n  else {\n    global.proceed = true;\n    console.log(\"inside of else statement to load camera\");\n\n    const [hasPermission, setHasPermission] = React.useState(null);\n    const [scanned, setScanned] = React.useState(false);\n\n    React.useEffect(() => {\n      (async () => {\n        const { status } = await BarCodeScanner.requestPermissionsAsync();\n        setHasPermission(status === \"granted\");\n      })();\n    }, []);\n\n    if (hasPermission === null) {\n      return <Text>Requesting for camera permission</Text>;\n    }\n    if (hasPermission === false) {\n      return <Text>No access to camera</Text>;\n    }\n\n    return (\n      <View style={styles.container}>\n        <BarCodeScanner\n          onBarCodeScanned={scanned ? undefined : switchToDropdown}\n          style={StyleSheet.absoluteFillObject}\n        />\n        {scanned && (\n          <Button\n            title={\"Tap to Scan Again\"}\n            onPress={() => setScanned(false)}\n          />\n        )}\n      </View>\n    );\n\n    function switchToDropdown(qr_info) {\n      if (qr_info != undefined) {\n        global.info_qr = qr_info.data;\n        qr_info = qr_info.data;\n        console.log(typeof qr_info, \"QR Code Type foo\");\n        console.log(qr_info, \"QR Code Info foot\");\n        const replaceAll = require(\"string.prototype.replaceall\");\n        qr_info = replaceAll(qr_info, \"[\", \"\");\n        qr_info = replaceAll(qr_info, \"]\", \"\");\n        qr_info = replaceAll(qr_info, \"'\", \"\");\n        \n\n        qr_info = qr_info.split(\",\");\n        console.log(qr_info, \"After split\");\n\n        // Converting the String type QR Code info to Array type. Complete.\n\n        // User is a Teacher\n        if (global.user_grade == \"TEACHER\") {\n          // Run this code when the teacher scans the correct code.\n          if (qr_info.length == 4) {\n             \n          var today = new Date();\n          var date2 =\n            today.getFullYear() +\n            \"/\" +\n            (today.getMonth() + 1) +\n            \"/\" +\n            today.getDate() +\n            \" \" +\n            (today.getHours()) +\n            \":\" +\n            (today.getMinutes());\n\n          var date =\n            today.getFullYear() +\n            \"/\" +\n            (today.getMonth() + 1) +\n            \"/\" +\n            today.getDate() +\n            \"/\" +\n            (today.getHours()) +\n            \":\" +\n            (today.getMinutes());\n          console.log(date2, \"Date 2\");\n          console.log(date, \"Date 1\");\n          \n          const db = getDatabase();\n          const starCountRef = ref(db, (qr_info[0])+\"/\"+(qr_info[1])+\"/\"+ (qr_info[2]) + \"/\"  + (qr_info[3]));\n          console.log(starCountRef, \"Infot ref\")\n          onValue(starCountRef, (snapshot) => {\n          var data = snapshot.val();\n          console.log(data,\": Data\")\n          data[\"Completed full Cycle\"] = true;\n          data[\"Time Returned\"] =  date2;\n          var count_row = data[\"Row\"]\n          var data_sheet = {\"Completed full Cycle\":\"true\", \"Time Returned\": date2}\n          console.log(global.user_name, \": Here is the name\");\n          data[\"Teacher at Check-In\"] = global.user_name;\n          var data_sheet2 = {\n            \"Teacher at Check-In\": global.user_name\n          };\n            \n          const infoReft = ref(db, \"INFO\");\n          onValue(infoReft, (snapshot) => {\n            var data2 = snapshot.val();\n            if (data2[\"queue2\"] == false) {\n              data2[\"queue2\"] = true;\n              set(infoReft, data2);\n\n              \n              if (global.proceed == true) {\n                console.log(\"SPINNNN\");\n                const send_ref = ref(\n                  db,\n                  qr_info[0] +\n                    \"/\" +\n                    qr_info[1] +\n                    \"/\" +\n                    qr_info[2] +\n                    \"/\" +\n                    qr_info[3]\n                );\n\n                const path =\n                  qr_info[0] +\n                  \"/\" +\n                  qr_info[1] +\n                  \"/\" +\n                  qr_info[2] +\n                  \"/\" +\n                  qr_info[3];\n                const queue2 = ref(db, \"Queue2\");\n                global.proceed = false;\n                set(send_ref, data);\n                push(queue2, path);\n                \n                navigation.navigate(\"SuccessfullySignedIn\");\n                return;\n              }\n              return;\n            }\n\n            else {\n              \n              if (global.proceed == true) {\n                console.log(\"SPINNNN\")\n                const send_ref = ref(\n                  db,\n                  qr_info[0] +\n                    \"/\" +\n                    qr_info[1] +\n                    \"/\" +\n                    qr_info[2] +\n                    \"/\" +\n                    qr_info[3]\n                );\n\n                const path =\n                  qr_info[0] +\n                  \"/\" +\n                  qr_info[1] +\n                  \"/\" +\n                  qr_info[2] +\n                  \"/\" +\n                  qr_info[3];\n                const queue2 = ref(db, \"Queue2\");\n                global.proceed = false;\n\n\n\n\n                   const SPREADSHEET_ID =\n                     \"1ilh0SncMmPGsRxu_bJ6h7YG2isc7aFU-WSrxDUlQjyA\";\n                   const SHEET_ID = \"1936491392\";\n                   const CLIENT_EMAIL =\n                     \"pretty@iep1-337004.iam.gserviceaccount.com\";\n                   const range = \"A1\";\n                   //const PRIVATE_KEY2 =\n                   // \"-----BEGIN PRIVATE\n                   //KEY-----\\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDjsmPxc3alsRYC\\nmi7JZOItSlVQ+h4+pcR86r7eLKfDvD8BXGIYc9EzRug6oz4K8uQC7EF9jM0CebQj\\nVGIz6lBjKTazUawhWff95OBEyOaoEEYSAByb04izDcCjrJ1COtr7yWjhH067Z3Ti\\nTzD3uI6nYIRr6DqDNPEfw16PdOvUCrv5Jj8Zu5ie3Mw8d5UYd881oJzlv68wKhxb\\ne5RCIYI+op8p4t9OeB0o3I+lomSTHp9co5fpDonC4mUKXg+qgmDmky2p0o7s6dRg\\nBt6mZVvo+45ohOnwWtSOU0mX3vK+/ljji54EizHtxbiRmxkEa3dPPzTTUgqReX5W\\nRmvSzZdXAgMBAAECggEAFs+IxqgYE0pV16XlmQRzyjC/slCUVhdaQ19rBqv3lJrX\\nvwWnyCZWJ2prmnA/J26k3AwaFX9VDHHv03hBLE1Fh2GaGsXMVj0CpJtYwltUDDMx\\nKd18ADplX/a5PUxuJrPpuz62tJLj2s9m/MMNN0v0cp0vNvY5Ymqb22BBqWJ/u6q1\\nNULNka9tYhEN4hhyTNw+q1qSIdCSLsaMmJpm16CSiUidfIsyofhNjSqoVng8Gk9Z\\nGQCguy/KMYDZZLd0K4++fk0DJZtTg9UMPvNObTrVFFCVtVIQC8V4R4JYE8xLkwhr\\nO3eW+/NDYSaxxm37nI18L9deTtnHo5Lj/p+ptNpRgQKBgQD8TnXI4uMfB+MZzMSs\\nBx4k4JsL9DLUtNVJ60POWHK4JEuQwsbZxiU3/BrS2pdW06Up3CwA1ftyaNphEIuo\\ng4Ks0qPd3uVeWIteJ5zdhbdLjKymeZRNtlHcIF+eAKmzuWq6v8uTNOvoOaDsSiji\\n11pOlKtKH57NWuYEucPaM1rg1wKBgQDnB7QdN1VI46yrvlASDjqqcfuzq41cRYiC\\nscNTlolK5ejp5nz3tBMzkZ7DAeHWLtstAKm+bKM/imsY82no242hjhh4LvX1SVi1\\nHTIiU+Kr0JM38rEoDrH1XpWUdom1CW/kGF8cWxD+jO9I5Ee6gzIn/qe4ARNknrjE\\nl4NQ+VetgQKBgCOByzOtMndgfcZYuejXy5c3ALrq7+hdVpLjiBRXADYH7ZZ+wstN\\nBlndoczAtIGkoV7FvG+VraBJP0pfsLfTYiV+M097Gd5wKZTjkEDgm44HSxjWjVdu\\nbBDFgY9T2o4PbwS/DyA1V2nECnCWczCRTAU5CO4Six+tRieuGPDxPz3bAoGAAmot\\nMsT6Sjm++0iQ869cY52vYNBhON6tL5iGDyCarMK8bX1wPvKN5NMX0rf5UVDKD61b\\nGNdv2WEr/2XD7KAm2dJvZQownfC3UaVNedhgnSUf9My/l0iYCZWEgLnAdLj1h2/N\\nxrEY+2AjvCJOsZ9fbdWWkTDJsBqMmdlvkPAaP4ECgYBLLMg5E110Lh7vwMo4be9z\\nMMzV4FTaKG7VH9mo1VGmB0Tuyu0nUNqQslHxHgSS4Gou0AAPs50ZTCwa+a8EV1It\\n7IBvPn0lyg44WIZNoY73gK/jl+6unKap2VE2LrUN5EDl5ziYT7VBbg8OaumjqrRc\\n0OtbowwdQEYvBhw9MHsJYw==\\n-----END\n                   // PRIVATE KEY-----\\n\"\n\n                   const api_key = \"AIzaSyDQVlXWEWSSuQ_BUhN3mfx7Cq6iYWt5w2I\";\n                   const PRIVATE_KEY =\n                     \"ya29.A0ARrdaM9Bdr8LasGVYImS-v31BVY78c43d7xHEuIutBK6u6g9DhIDlPfA4Ny1rVVKV-oZdttBDVF8GoAobyCWNT0OuM_r8nfMxIg0dtuL0RyWOq4lizgrAgeTDvH2gUzmYq4YzVZHBgVkT7x8ONk5Z0_2WFpn\";\n\n                  \n\n                  \n                  const printObject = (obj) => {\n                    var colum =  9;\n                    var row = count_row;\n                    \n                    set(send_ref, data);\n                    push(queue2, path);\n                    \n                    for (var key in obj) {\n                      if (obj.hasOwnProperty(key)) {\n                        updateSheetValues(String(obj[key]), row, colum);\n                        colum=10;\n                        console.log(colum, \"colum\");\n                        console.log(row, \"row\");\n                      }\n                    }\n                    console.log(\"The job finished successfully.\");\n                  };\n\n\n                  const printObject2 = (obj, col) => {\n                    var colum = col;\n                    var row = count_row;\n\n                    \n\n                    for (var key in obj) {\n                      if (obj.hasOwnProperty(key)) {\n                        updateSheetValues(String(obj[key]), row, colum);\n                        \n                        console.log(colum, \"colum\");\n                        console.log(row, \"row\");\n                      }\n                    }\n                    console.log(\"The job finished successfully.\");\n                  };\n\n                  const updateSheetValues = (value, row, colum) => {\n                    fetch(\n                      `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}:batchUpdate`,\n                      {\n                        method: \"POST\",\n                        headers: {\n                          \"Content-Type\": \"application/json\",\n                          //update this token with yours.\n                          Authorization: `Bearer ${PRIVATE_KEY}`,\n                        },\n                        body: JSON.stringify({\n                          requests: [\n                            {\n                              repeatCell: {\n                                range: {\n                                  startColumnIndex: colum - 1,\n                                  endColumnIndex: colum,\n                                  startRowIndex: row - 1,\n                                  endRowIndex: row,\n                                  sheetId: SHEET_ID,\n                                },\n                                cell: {\n                                  userEnteredValue: {\n                                    stringValue: value,\n                                  },\n                                },\n                                fields: \"*\",\n                              },\n                            },\n                          ],\n                        }),\n                      }\n                    );\n                  };\n\n\n\n\n                  async function run() {\n                    await printObject(data_sheet);\n                    await printObject2(data_sheet2, 3);\n                    \n                  }\n                  run();  \n\n\n\n\n\n\n                \n                navigation.navigate(\"SuccessfullySignedIn\");\n                return\n              }\n              return \n              \n            }\n\n          }, {\n            onlyOnce: true,\n          });\n\n\n\n\n\n          return\n          })}\n          // Run this code when the teacher scans the wrong code.\n          else {\n            console.log(\"Wrong code!!!!\");\n          }\n\n          \n        // User is a Teacher. Complete\n\n        // User is a Student\n        \n      \n    }\n\n    else {\n          // Run this code when the student scans the correct code.\n          if (qr_info.length == 2) {\n            console.log(\"signOut\");\n            navigation.replace(\"destinationPicker\");\n          }\n\n          // Run this code when the student scans the wrong code.\n          else {\n            console.log(\"Wrong code!!!!\");\n          }\n        }\n\n\n    \n\n  }}}}\n  \n\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n\n    backgroundColor: \"white\",\n    padding: 8,\n  },\n  paragraph: {\n    margin: 24,\n    fontSize: 70,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    // SignPainter- HouseScript\n    color: \"white\",\n  },\n  input: {\n    height: 0,\n    width: 200,\n    margin: 0,\n    padding: 10,\n\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    paddingBottom: 800,\n  },\n\n  fixToText: {\n    alignSelf: \"center\",\n    width: 200,\n    borderRadius: 15,\n    paddingTop: 20,\n  },\n\n  roundButton1: {\n    width: 200,\n    height: 40,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    padding: 10,\n    borderRadius: 15,\n\n    backgroundColor: \"purple\",\n  },\n\n  roundButton2: {\n    width: 200,\n    height: 40,\n    paddingTop: 0,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    padding: 0,\n    borderRadius: 15,\n\n    backgroundColor: \"orange\",\n  },\n  // SignPainter- HouseScript 98.0\n  roundButton13: {\n    fontSize: 20,\n    color: \"white\",\n  },\n  roundButton14: {\n    fontSize: 20,\n    color: \"white\",\n  },\n  image: {\n    flex: 1,\n    justifyContent: \"center\",\n  },\n  input2: {\n    height: 40,\n    margin: 12,\n    borderWidth: 0,\n    borderWidth: 0,\n    borderRadius: 15,\n    padding: 10,\n    width: 400,\n    fontSize: 16,\n    textAlign: \"center\",\n    color: \"red\",\n\n    alignSelf: \"center\",\n  }\n});"]},"metadata":{},"sourceType":"module"}